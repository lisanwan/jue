/*!
 * juejin-helper - v1.6.1
 * Compiled Wed, 10 Aug 2022 09:10:57 UTC
 *
 * juejin-helper is licensed under the Apache License Version 2.0.
 * https://opensource.org/licenses/Apache-2.0
 */
import * as axios from 'axios';
import { AxiosInstance } from 'axios';

declare class Cookie {
    cookie: string;
    stack: Map<string, unknown>;
    constructor(cookie?: string);
    setCookieValue(cookie?: string): void;
    get(key: string): unknown;
    has(key: string): boolean;
    set(key: string, value: unknown): Map<string, unknown>;
    entries(): IterableIterator<[string, unknown]>;
    clear(): void;
    toString(): string;
}

interface SDKSetting {
    cookieid: string;
    reportDomain: string;
    bid: string;
    plugins: {
        [prop: string]: any;
    };
    last_modify_time: string;
    heatmap: {
        [prop: string]: any;
    };
    setting: {
        [prop: string]: any;
    };
    whitelist: any[];
}
declare type jsonstring = string;
interface SDKEvent {
    event: string;
    local_time_ms: number;
    params: jsonstring;
    ab_sdk_version?: string;
    is_bav?: number;
    session_id?: string;
}
interface SDKListResult {
    e: 0 | -1 | -3;
}
/**
 * SDK
 */
declare class Sdk {
    juejin: JuejinHelper;
    sdk_type: string;
    sdk_lib: string;
    sdk_version: string;
    constructor(juejin: JuejinHelper);
    slardarSDKSetting(): Promise<SDKSetting>;
    list(events?: SDKEvent[]): Promise<SDKListResult>;
    mockTrackGrowthEvent(): Promise<SDKListResult>;
    mockTrackOnloadEvent(): Promise<SDKListResult>;
}

declare class Growth {
    http: AxiosInstance;
    constructor(juejin: JuejinHelper);
    /**
     * 获取统计签到天数
     * @returns {Promise<*>}
     * {
     *   cont_count 连续签到天数
     *   sum_count 累计签到天数
     * }
     */
    getCounts(): Promise<{
        cont_count: number;
        sum_count: number;
    }>;
    /**
     * 获取当前矿石数
     * @returns {Promise<*>}
     * number 当前矿石数
     */
    getCurrentPoint(): Promise<axios.AxiosResponse<any, any>>;
    /**
     * 获取今日签到状态
     * @returns {Promise<*>}
     * boolean 是否签到
     */
    getTodayStatus(): Promise<axios.AxiosResponse<any, any>>;
    /**
     * 获取月签到日历
     * @returns {Promise<*>}
     * [
     *   {
     *     date: timestamp(格式1646150400)
     *     point: number增加矿石数
     *     status: enum(1 今日, 4 未签到, 3 已签到)
     *   }
     * ]
     */
    getByMonth(): Promise<axios.AxiosResponse<any, any>>;
    getLotteryConfig(): Promise<axios.AxiosResponse<any, any>>;
    drawLottery(): Promise<axios.AxiosResponse<any, any>>;
    checkIn(): Promise<axios.AxiosResponse<any, any>>;
    getLotteriesLuckyUsers(data?: {
        page_no: number;
        page_size: number;
    }): Promise<{
        count: number;
        lotteries: Array<{
            history_id: number;
            [prop: string]: any;
        }>;
    }>;
    dipLucky(lottery_history_id: number): Promise<{
        has_dip: boolean;
        dip_value: number;
    }>;
    getMyLucky(): Promise<axios.AxiosResponse<any, any>>;
}

interface Position {
    x: number;
    y: number;
}
interface BlockData {
    moveUp: number;
    moveDown: number;
    moveLeft: number;
    moveRight: number;
    jump: number;
    loop: number;
}
declare type MapData = number[];
interface GameCommandResult {
    appendMapData: MapData;
    blockData: BlockData;
    curPos: Position;
    gameDiamond: number;
}
interface GameOverResult {
    activity: string;
    deep: number;
    gameDiamond: number;
    originMapData: MapData;
    passLine: Position[];
    picoDiamond: number;
    realDiamond: number;
    todayDiamond: number;
    todayLimitDiamond: number;
}
interface GameStartResult {
    seed: number;
    gameId: string;
    curPos: Position;
    mapData: MapData;
    blockData: BlockData;
}
interface GameInfoResult {
    activity: string;
    gameStatus: 0 | 1;
    userInfo: {
        uid: string;
        name: string;
        todayDiamond: number;
        todayLimitDiamond: number;
        maxTodayDiamond: number;
        badge: string;
    };
    gameInfo: {
        gameId: string;
        roleId: 1 | 2 | 3;
        gameDiamond: number;
        isNew: boolean;
        addRate: number;
        mapData: MapData;
        mapDeep: number;
        blockData: BlockData;
        curPos: Position;
        commandList: any[];
        deep: number;
        elementData: {
            pearl: number;
            jellyfish: number;
            pico: number;
            starfish: number;
            shell: number;
        };
        remainDoubleStep: number;
        isGameOver: boolean;
        picoNode: unknown[];
        shopPosList: unknown[];
        passLine: string;
        activity: string;
        picoDiamond: number;
        version: string;
    } | null;
}
interface GameLoginResult {
    uid: string;
    name: string;
    isAuth: number;
    isNew: number;
}
declare class Seagold {
    juejin: JuejinHelper;
    http: AxiosInstance;
    constructor(juejin: JuejinHelper);
    setToken(token: string): void;
    gameLogin(): Promise<GameLoginResult>;
    gameInfo(): Promise<GameInfoResult>;
    gameStart(data?: {
        roleId: 1 | 2 | 3;
    }): Promise<GameStartResult>;
    gameOver(data?: {
        isButton: number;
    }): Promise<GameOverResult>;
    gameCommand(gameId: number, command?: never[]): Promise<GameCommandResult>;
}

/**
 * 数字拼图
 * 游戏地址: https://juejin.cn/game/shuzimiti/
 */
declare class NumPuzz {
    juejin: JuejinHelper;
    http: AxiosInstance;
    constructor(juejin: JuejinHelper);
    setToken(token: string): void;
    /**
     * 游戏登录
     * @returns {Promise<*>}
     */
    gameLogin(): Promise<axios.AxiosResponse<any, any>>;
    /**
     * 获取主页信息
     * @returns {Promise<*>}
     * bug: 0
     * diamond: 200
     * originality: 0
     * showToast: false
     */
    gameInfo(): Promise<axios.AxiosResponse<any, any>>;
    /**
     * 开始游戏
     * @param level Number [1|2|3] 简单|中等|困难
     * @returns {Promise<*>}
     * guide: 0
     * level: 游戏等级
     * map: 游戏地图
     * round: 关卡
     * target: 目标结果
     */
    gameStart(data: {
        level: number;
    }): Promise<axios.AxiosResponse<any, any>>;
    /**
     * 跳过游戏
     * @description 结构同开始游戏
     * @param level
     * @returns {Promise<*>}
     */
    gameSkip(data: {
        level: number;
    }): Promise<axios.AxiosResponse<any, any>>;
    /**
     * 游戏完成
     * @param level Array<[x, y, direction]>, direction["u", "d", "l", "r"]
     * @param command
     * @returns {Promise<*>}
     */
    gameComplete(data: {
        level: number;
        command: [number, number, "u" | "d" | "l" | "r"];
    }): Promise<axios.AxiosResponse<any, any>>;
}

interface Bug {
    bug_type: number;
    bug_time: number;
    bug_show_type: number;
    is_first: boolean;
}
interface Competition {
    competition_id: number;
    [prop: string]: any;
}
interface User {
    user_own_bug: number;
    [prop: string]: any;
}
declare class Bugfix {
    http: AxiosInstance;
    constructor(juejin: JuejinHelper);
    /**
     * 获取竞赛信息
     * @returns {Promise<Competition>}
     */
    getCompetition(): Promise<Competition>;
    /**
     * 获取用户信息
     * @param data
     * @returns {Promise<User>}
     */
    getUser(data: {
        competition_id: number;
    }): Promise<User>;
    /**
     * 获取未收集的Bug
     * @returns {Promise<Bug[]>}
     */
    getNotCollectBugList(): Promise<Bug[]>;
    /**
     * 收集Bug
     * @param bug_time
     * @param bug_type
     * @returns {Promise<*>}
     */
    collectBug(data: Bug): Promise<axios.AxiosResponse<any, any>>;
    /**
     * 批量收集Bug
     * @param buglist
     * @returns {Promise<boolean|*>}
     */
    collectBugBatch(buglist?: Bug[]): Promise<boolean | unknown>;
}

declare type JuejinUserProps = {
    user_id: string;
    user_name: string;
    [prop: string]: any;
} | null;
declare type JuejinCookieTokens = {
    aid: string;
    uuid: string;
    user_unique_id: string;
    web_id: string;
} | null;
declare class JuejinHelper {
    cookie: Cookie;
    cookieTokens: JuejinCookieTokens;
    user: JuejinUserProps;
    login(cookie: string): Promise<void>;
    logout(): Promise<void>;
    getCookie(): string;
    getCookieTokens(): JuejinCookieTokens;
    getUser(): JuejinUserProps;
    makeToken(): Promise<string>;
    sdk(): Sdk;
    growth(): Growth;
    seagold(): Seagold;
    numpuzz(): NumPuzz;
    bugfix(): Bugfix;
}

export { JuejinHelper as default };
